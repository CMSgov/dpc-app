name: 'Temp Caller'

on:
  push:
    paths:
      - .github/workflows/ecs-deploy.yml
      - .github/workflows/temp-caller.yml

  workflow_dispatch:
    inputs:
      terraform:
        description: 'Also run terraform?'
        type: boolean
        default: false
        required: true

jobs:
  run_id:
    name: Check run id
    runs-on: self-hosted
    steps:
      - name: Write out run id
        run: |
          echo ${{ github.run_id }}
        
  deploy:
    name: ECS Deploy
    uses: CMSgov/dpc-app/.github/workflows/ecs-deploy.yml@jd/dpc-4454-ecs-deploy
    with:
      env: dev
      confirm_env: devx
      tag: latest
      terraform: ${{ inputs.terraform || false }}
    secrets: inherit

