# Group Generator

The Group Generator (`group_generator.py`) is a script that will output a request body for creating a `Group` to a `json` file.
The number of patients in the resulting group is determined by command-line arguments, and multiple groups can be created at once.

All data in both the sample groups in this directory and any group generated by the script include fake NPIs and synthetic patient MBIs.
The MBIs that are randomly assigned to patients during group generation relate to actual test data on our FHIR server, which
means that the groups can also be used to start a job and retrieve synthetic `Patient`, `Coverage`, and `ExplanationofBenefit` data.

When creating a group with over 100 patients, multiple provider NPIs are automatically generated and assigned.
While the number of 100 patients per provider is arbitrary, this simulates the real possibility of having multiple providers associated
with different patients in the same group.

## Requirements
- Python 3

### Usage
- Ensure that the `mbis.csv` folder is in the same directory as the `group_generator.py` script

- You may need to make the script executable
```shell
$ chmod +x group_generator.py 
```

- To create a group containing 10,000 patients, run the following command from the terminal: 
```shell
$ ./group_generator.py
Creating group with 10000 patients
Done:  group-8557303086.json # Resulting file will be saved in the same directory as the script

```

- To specify the number of patients in the group, provide an integer after the filename:
```shell
$ ./group_generator.py 14
Creating group with 14 patients
Done:  group-9624758091.json

```

- To create multiple groups at once, specify a patient size for each group, separated by spaces:
```shell
$ ./group_generator.py 120 83 4 1 23 23 1000
Creating group with 120 patients
Done:  group-6100787160.json

Creating group with 83 patients
Done:  group-4934303760.json

Creating group with 4 patients
Done:  group-2495184604.json

Creating group with 1 patient
Done:  group-4947269749.json

Creating group with 23 patients
Done:  group-8580917110.json

Creating group with 23 patients
Done:  group-1111212992.json

Creating group with 1000 patients
Done:  group-1730899835.json

```

### Output
Examples of this script's output can be found in this directory under the following filenames:
```
group-3-patients.json
group-10-patients.json
group-50-patients.json
group-200-patients.json
group-3000-patients.json
```
